{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Placement System{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      rel="icon"
      href="{% static 'images/peak_logo.png' %}"
      type="image/png"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.7.107/pdf.min.js"></script>
    {% block extra_head %}{% endblock %}
  </head>
  <body class="bg-gray-50">
    <!-- Navbar -->
    <header class="bg-teal-700 text-white shadow-md fixed top-0 left-0 w-full z-50">
      <nav
        class="max-w-screen-xl mx-auto px-6 py-4 flex items-center justify-between"
      >
        <div class="flex items-center space-x-4">
          <a href="/" class="text-2xl font-bold text-teal-300 pr-6"
            >Peak College</a
          >
          <div class="hidden md:flex space-x-6">
            {% if not has_profile %} {% if not user.is_superuser %}
            <a
              href="{% url 'create_placement_profile' %}"
              class="hover:text-teal-300 flex items-center space-x-2"
            >
              <i class="fas fa-id-card"></i
              ><span>Create Placement Profile</span>
            </a>
            {% endif %} {% endif %}
            <a href="/" class="hover:text-teal-300 flex items-center space-x-2">
              <i class="fas fa-clipboard-list"></i
              ><span>Placement Profiles</span>
            </a>

            {% if user.is_superuser %}
            <a
              href="{% url 'incomplete_profiles' %}"
              class="hover:text-teal-300 flex items-center space-x-2"
            >
              <i class="fas fa-user-edit"></i><span>Incomplete Profiles</span>
            </a>
            <a
              href="{% url 'pending_users' %}"
              class="hover:text-teal-300 flex items-center space-x-2"
            >
              <i class="fas fa-user-clock"></i><span>Pending Users</span>
            </a>
            <a
              href="{% url 'assign_facility_and_orientation_date_to_users' %}"
              class="hover:text-teal-300 flex items-center space-x-2"
            >
              <i class="fas fa-building"></i><span>Assign Facility</span>
            </a>
            <a
              href="{% url 'skills_passbook_list' %}"
              class="hover:text-teal-300 flex items-center space-x-2"
            >
              <i class="fas fa-passport"></i><span>Skills Passbook</span>
            </a>
            {% endif %}
          </div>
        </div>

        <!-- User Profile + Mobile Menu Button -->
        <div class="flex items-center space-x-4">
          {% if user.is_authenticated %}
          <div class="relative">
            <button
              id="normal-menu-button"
              class="flex items-center hidden md:flex space-x-2 bg-teal-700 rounded-full px-4 py-2 hover:bg-teal-600 focus:outline-none"
            >
              <span>{{ user.username }}</span>
              <i class="fas fa-user-circle"></i>
            </button>
            <div
              id="normal-menu"
              class="absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg z-10 hidden"
            >
              <a
                href="{% url 'profile' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-user-circle mr-2"></i> Profile
              </a>
              {% if user.is_superuser %}
              <a
                href="{% url 'approvers_view' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-users mr-2"></i> Approvers
              </a>
              <a
                href="{% url 'facility_list' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-building mr-2"></i> Facilities
              </a>
              <a
                href="{% url 'orientation_list' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-calendar-alt mr-2"></i> Orientation Dates
              </a>
              <a
                href="{% url 'skills_passbook_list' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-passport mr-2"></i> Skills Passbook
              </a>
              {% endif %}
              <a
                href="{% url 'logout' %}"
                class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
              >
                <i class="fas fa-sign-out-alt mr-2"></i> Logout
              </a>
            </div>
          </div>
          {% else %}
          <a
            href="{% url 'login' %}"
            class="text-white px-6 py-3 bg-teal-500 rounded-md hover:bg-teal-600"
            >Login</a
          >
          {% endif %}
          <div class="md:hidden flex items-center">
            <button
              id="mobile-menu-button"
              class="text-white focus:outline-none"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </nav>

      <!-- Mobile Menu -->
      <div id="mobile-menu" class="md:hidden bg-teal-700 text-white hidden">
        <div class="px-6 py-4 space-y-4">
          <a href="/" class="hover:text-teal-300 flex items-center space-x-2">
            <i class="fas fa-clipboard-list"></i><span>Placement Profiles</span>
          </a>
          {% if user.is_authenticated %}
          <a
            href="{% url 'create_placement_profile' %}"
            class="flex items-center space-x-2"
          >
            <i class="fas fa-id-card"></i><span>Create Placement Profile</span>
          </a>
          {% if user.is_superuser %}
          <a
            href="{% url 'incomplete_profiles' %}"
            class="hover:text-teal-300 flex items-center space-x-2"
          >
            <i class="fas fa-user-edit"></i><span>Incomplete Profiles</span>
          </a>
          <a
            href="{% url 'pending_users' %}"
            class="hover:text-teal-300 flex items-center space-x-2"
          >
            <i class="fas fa-user-clock"></i><span>Pending Users</span>
          </a>
          <a
            href="{% url 'approvers_view' %}"
            class="hover:text-teal-300 flex items-center space-x-2"
          >
            <i class="fas fa-users"></i><span>Approvers</span>
          </a>
          <a
            href="{% url 'skills_passbook_list' %}"
            class="hover:text-teal-300 flex items-center space-x-2"
          >
            <i class="fas fa-passport"></i><span>Skills Passbook</span>
          </a>
          {% endif %}
          <a href="{% url 'profile' %}" class="flex items-center space-x-2">
            <i class="fas fa-user-circle"></i><span>Profile</span>
          </a>
          <a href="{% url 'logout' %}" class="flex items-center space-x-2">
            <i class="fas fa-sign-out-alt"></i><span>Logout</span>
          </a>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="min-h-[100vh] pt-16"> <!-- pt-16 = 64px top padding for fixed navbar -->
      <div class="max-w-screen-xxl mx-auto px-4 sm:px-2">
        {% block content %}{% endblock %}
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-teal-800 text-white py-8 mt-12">
      <div class="max-w-screen-xl mx-auto px-6 text-center">
        <p>&copy; 2025 Peak College. All rights reserved.</p>
        <p class="text-sm">
          A placement management system for students and faculty
        </p>
      </div>
    </footer>

    <!-- Scripts -->
    <script>
      document
        .getElementById("mobile-menu-button")
        .addEventListener("click", function () {
          document.getElementById("mobile-menu").classList.toggle("hidden");
        });
      document
        .getElementById("normal-menu-button")
        .addEventListener("click", function () {
          document.getElementById("normal-menu").classList.toggle("hidden");
        });
    </script>
    {% if show_under_review_popup %}
<div id="underReviewModal" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-40">
  <div class="bg-white rounded-lg shadow-lg max-w-md w-full p-6">
    <div class="flex justify-between items-center border-b pb-2 mb-4">
      <h3 class="text-lg font-semibold text-teal-700">Documents Under Review</h3>
      <button onclick="hideUnderReviewModal()" class="text-gray-400 hover:text-gray-700 text-2xl leading-none">&times;</button>
    </div>
    <div class="text-gray-700">
      Your documents are now <strong class="text-teal-700">UNDER REVIEW</strong> by our team.<br><br>
      Next step, wait for the approval of your submitted documents.<br>
      Youâ€™ll receive another email once all are approved.
    </div>
  </div>
</div>
<script>
  function hideUnderReviewModal() {
    document.getElementById('underReviewModal').style.display = 'none';
  }
  setTimeout(hideUnderReviewModal, 5000);
</script>
{% endif %}
  </body>
</html>
